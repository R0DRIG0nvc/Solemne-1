{% extends "Partials/_Base.html" %}
{% load static %}
{% block Title %}
Entrenadores
{% endblock Title %}
{% block Styles %}
<link rel="stylesheet" type="text/css" href="{% static 'vendor/plugins/magnific/magnific-popup.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'vendor/plugins/datatables/media/css/dataTables.bootstrap.css' %}">
<link rel="stylesheet" type="text/css" href="{% static 'vendor/plugins/datatables/media/css/dataTables.plugins.css' %}">
{% endblock Styles %}
{% block TitleMenu %}
<ol class="breadcrumb">
  <li class="crumb-active">
    <a href="dashboard.html">Dashboard</a>
  </li>
  <li class="crumb-icon">
    <a href="dashboard.html">
      <span class="glyphicon glyphicon-home"></span>
    </a>
  </li>
  <li class="crumb-link">
    <a href="dashboard.html">Home</a>
  </li>
  <li class="crumb-trail">Dashboard</li>
</ol>
{% endblock TitleMenu %}
{% block Content %}
<!-- <div class="tray tray-center"> -->
<div class="row">
  <div class="col-md-12">
    <div class="panel panel-visible" id="spy2">
      <div class="panel-heading">
        <div class="panel-title hidden-xs">
          <span class="glyphicon glyphicon-tasks"></span>Equipo
          <a href="{% url 'basket_addTeam' %}">
            <button type="button" class="btn btn-sm btn-primary pull-right mt5"> <li class="fa fa-plus"></li> Agregar</button>
          </a>
        </div>
      </div>
      <div class="panel-body pn">
        <table class="table table-striped table-hover" id="tableCoach" cellspacing="0" width="100%">
          <thead>
            <tr>
              <th>Logo</th>
              <th>Nombre</th>
              <th>Descripción</th>
              <th>Entrenador</th>
              <th>Acción</th>
            </tr>
          </thead>
          <tbody>
          </tbody>
        </table>
      </div>
    </div>
  </div>
</div>
<div id="modal-form" class="popup-basic admin-form mfp-with-anim mfp-hide" style="max-width: 700px;">
  <div class="panel">
    <div class="panel-heading">
      <span class="panel-title">
        <i class="fa fa-rocket"></i>Datos del campo adicional</span>
    </div>
    <!-- end .panel-heading section -->

    <form method="post" action="/" id="comment">
      <div class="panel-body p25">
        <!-- Row section -->
        <div class="section row">
          <div class="col-md-6 col-ms-6 col-xs-6 col-xs-6">
            <div class="form-group">
            <label for="id_rut">Rut</label>
            <input type="text" name="rut" maxlength="8" required="" title="" placeholder="Rut" id="id_rut" class="form-control">
          </div>
          <div class="form-group">
            <label for="id_dv">Dv</label>
            <input type="number" name="dv" required="" min="0" title="" placeholder="Dv" id="id_dv" class="form-control">
          </div>
          </div>
          <div class="col-md-6 col-ms-6 col-xs-6 col-xs-6">
            <div class="form-group">
              <label for="id_name">Name</label>
              <input type="text" name="name" maxlength="120" required="" title="" placeholder="Name" id="id_name" class="form-control">
            </div>
            <div class="form-group">
              <label for="id_nickname">Nickname</label>
              <input type="text" name="nickname" maxlength="120" required="" title="" placeholder="Nickname" id="id_nickname" class="form-control">
            </div>
          </div>
          <div class="col-md-6 col-ms-6 col-xs-6 col-xs-6">
            <div class="form-group">
              <label for="id_birthday">Birthday</label>
              <input type="text" name="birthday" required="" title="" placeholder="Birthday" id="id_birthday" class="form-control">
            </div>
            <div class="form-group">
              <label for="id_age">Age</label>
              <input type="number" name="age" required="" min="0" title="" placeholder="Age" id="id_age" class="form-control"></div>
          </div>
          <div class="col-md-6 col-ms-6 col-xs-6 col-xs-6">
            <div class="form-group">
              <label for="id_email">Email</label>
              <input type="email" name="email" maxlength="254" required="" title="" placeholder="Email" id="id_email" class="form-control">
            </div>
            <div class="form-group">
              <label for="id_height">Height</label>
              <input type="number" name="height" required="" min="0" title="Altura en cm" placeholder="Height" id="id_height" class="form-control">
              <small class="form-text text-muted">Altura en cm</small>
            </div>
          </div>
          <div class="col-md-6 col-ms-6 col-xs-6 col-xs-6">
            <div class="form-group">
            <label for="id_weight">Weight</label>
            <input type="number" name="weight" required="" min="0" title="Peso en gramos" placeholder="Weight" id="id_weight" class="form-control">
            <small class="form-text text-muted">Peso en gramos</small>
          </div>
            <div class="form-group">
              <label for="id_picture">Picture</label>
              <div class="row bootstrap4-multi-input">
                <div class="col-12">
                  <input type="file" name="picture" title="" id="id_picture" required="" class="">
                </div>
              </div>
            </div>
          </div>
          <div class="col-md-6 col-ms-6 col-xs-6 col-xs-6">
            <div class="form-group">
              <label for="id_position">Position</label>
              <select name="position" title="" id="id_position" required="" class="form-control">
                <option value="" selected="">---------</option>
                <option value="BA">Base</option>
                <option value="ES">Escolta</option>
                <option value="AL">Alero</option>
                <option value="AP">Ala-pivot</option>
                <option value="PI">Pivot</option>
              </select>
            </div>
            <div class="form-group">
              <label for="id_team">Team</label>
              <select name="team" title="" id="id_team" required="" class="form-control">
                <option value="" selected="">---------</option>
                <option value="1">asdasd</option>
              </select>
            </div>
          </div>
        </div>
      </div>
    </form>
    <div class="panel-footer">
      <button id="confcamp" type="submit" class="btn btn-hover btn-success btn-block">Confirmar</button>
    </div>
  </div>
  <!-- end: .panel -->
</div>
<!-- </div> -->
{% endblock Content %}
{% block JavaScript %}
<script src="{% static 'vendor/plugins/datatables/media/js/jquery.dataTables.js' %}"></script>
<script src="{% static 'vendor/plugins/datatables/extensions/TableTools/js/dataTables.tableTools.min.js' %}"></script>
<script src="{% static 'vendor/plugins/datatables/extensions/ColReorder/js/dataTables.colReorder.min.js' %}"></script>
<script src="{% static 'vendor/plugins/datatables/media/js/dataTables.bootstrap.js' %}"></script>
<script src="{% static 'vendor/plugins/magnific/jquery.magnific-popup.js' %}"></script>
<script type="text/javascript">
  var tableCoach =
  $('#tableCoach').DataTable({
    "processing": true,
    "serverSide": true,
    "ajax": {
        "url": "{% url 'basket_teamList' %}",
        "type": "POST",
        "data": {
          "csrfmiddlewaretoken": getCookie('csrftoken'),
          "action" : 'datatable'
        }
    },
    "columns": [
        { "data": "logo" },
        { "data": "name" },
        { "data": "description" },
        { "data": "coach" },
        { "data": "action" },
    ],
    "aoColumnDefs": [{
      'bSortable': false,
      'aTargets': [0,1,2,3,4]
    }],
    "language": {
      "sProcessing":     "Procesando...",
      "sLengthMenu":     "Mostrar _MENU_ registros",
      "sZeroRecords":    "No se encontraron resultados",
      "sEmptyTable":     "Ningún dato disponible en esta tabla",
      "sInfo":           "Mostrando registros del _START_ al _END_ de un total de _TOTAL_ registros",
      "sInfoEmpty":      "Mostrando registros del 0 al 0 de un total de 0 registros",
      "sInfoFiltered":   "(filtrado de un total de _MAX_ registros)",
      "sInfoPostFix":    "",
      "sSearch":         "Buscar:",
      "sUrl":            "",
      "sInfoThousands":  ",",
      "sLoadingRecords": "Cargando...",
      "oPaginate": {
          "sFirst":    "Primero",
          "sLast":     "Último",
          "sNext":     "Siguiente",
          "sPrevious": "Anterior"
      },
      "oAria": {
          "sSortAscending":  ": Activar para ordenar la columna de manera ascendente",
          "sSortDescending": ": Activar para ordenar la columna de manera descendente"
      }
    },
    "iDisplayLength": 10,
    "aLengthMenu": [
      [5, 10, 25, 50, -1],
      [5, 10, 25, 50, "Todos"]
    ],
    "sDom": '<"dt-panelmenu clearfix"lfr>t<"dt-panelfooter clearfix"ip>',
    "oTableTools": {
      "sSwfPath": "{% static 'vendor/plugins/datatables/extensions/TableTools/swf/copy_csv_xls_pdf.swf' %}"
    }
  });
  $(document).on('click', '.delete', function(){
    div = $(this);
    $.ajax({
      url : "{% url 'basket_teamList' %}",
      type: "POST",
      data : {
        team_pk : div.parents().eq(1).data('pk'),
        action : "delete",
        csrfmiddlewaretoken: getCookie('csrftoken'),
      },
      success: function(data){
        tableCoach.row(div.parents().eq(4)).remove().draw();
      },
    });
  })
  $(document).on('click', '.edit', function(){
    div = $(this);
    $.ajax({
      url : "{% url 'basket_teamList' %}",
      type: "POST",
      data : {
        team_pk : div.parents().eq(1).data('pk'),
        action : "edit",
        csrfmiddlewaretoken: getCookie('csrftoken'),
      },
      success: function(data){
        $.magnificPopup.open({
          removalDelay: 500, //delay removal by X to allow out-animation,
          items: {
            src: '#modal-form'
          },
          overflowY: 'hidden', //
          callbacks: {
            beforeOpen: function(e) {
              this.st.mainClass = 'mfp-zoomIn';
            }
          },
          midClick: true
          //Añadir campo con la volaita del JS
        })
      },
    });
  })
</script>
{% endblock JavaScript %}
